# CSRF

## Basic

CSRF 攻击的核心在于利用网站对用户浏览器的信任，以及浏览器自动携带用户认证信息（如 Cookie）的特性。攻击者通过构造恶意链接或页面，诱导用户访问，从而触发对目标网站的请求。由于浏览器已经认证过用户，因此目标网站会认为这是用户的真实请求并执行相应操作。

case:

- 用户访问过 youtube -> 打开了一个钓鱼网站 -> 钓鱼网站里可能有 iframe 放着 youtube 的一个链接，导致用户发送了一个取关/水军私信之类的操作

## Solution

- Cookie 添加 samesite
- Get 请求中不要做写操作
- 验证 HTTP Referer 字段; 不过 Referer 字段的值可以由浏览器或用户进行修改
- 自定义 HTTP 头属性并验证：类似于添加 Token 的方法，可以在 HTTP 头中自定义一个属性，并在服务器端进行验证。这种方法也可以有效地防御 CSRF 攻击
- 添加并验证 Token：在 HTTP 请求中以参数的形式加入一个随机产生的 Token，并在服务器端建立一个拦截器来验证这个 Token。如果请求中没有 Token 或者 Token 内容不正确，则认为可能是 CSRF 攻击而拒绝该请求。这种方法相对更安全，但需要在客户端和服务器端都进行额外的处理
